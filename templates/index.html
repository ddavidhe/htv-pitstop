<!DOCTYPE html>
<html>
<head>
    <title>PitStop - PDF Syllabus Parser</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>🏁 PitStop 🏎️</h1>
        <form method="POST" enctype="multipart/form-data" class="upload-form">
            <div class="file-input-wrapper" id="drop-area">
                <input type="file" name="pdf" accept="application/pdf" id="pdf-input">
                <div class="file-input-text">
                    📄 Click to select PDF file or drag & drop
                </div>
            </div>
            <button type="submit" class="upload-btn">Parse Syllabus</button>
        </form>
        
        <!-- Bottom buttons -->
        <div class="bottom-buttons" style="margin-top: 10px;">
            <a href="{{ url_for('swipe_topics') }}" class="secondary-btn">📚 Judge Yourself </a>
            <a href="{{ url_for('timeblock') }}" class="secondary-btn">⏰ Time Block</a>
        </div>
    </div>

    <script>
        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('pdf-input');
        const textDiv = document.querySelector('.file-input-text');

        // Show selected file name
        fileInput.addEventListener('change', function(e) {
            const fileName = e.target.files[0]?.name;
            if (fileName) {
                textDiv.textContent = `📄 Selected: ${fileName}`;
            }
        });
        
        // Click to select file
        dropArea.addEventListener('click', () => {
            fileInput.click();
        });

        // Drag and drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
            dropArea.classList.add('highlight');
        }

        function unhighlight(e) {
            dropArea.classList.remove('highlight');
        }

        dropArea.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;

            if (files.length > 0) {
                fileInput.files = files;
                textDiv.textContent = `📄 Selected: ${files[0].name}`;
            }
        }
    </script>
</body>
</html>